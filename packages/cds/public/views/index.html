<div class="cds" data-ng-controller="CdsController">
	<div class="alert alert-{{ status.type }} alert-dismissable" ng-hide="!status.text">
		<button type="button" class="close" data-dismiss="alert" aria-hidden="true" ng-click="status.text=''">&times;</button>
		{{ status.text }}
	</div>
	<ul class="nav nav-pills">
		<li ng-repeat="c in categories" ng-class="c.name === category.name ? 'active':''">
			<a href="#!/cat/{{c.name}}">{{c.name}}</a>
		</li>
	</ul>
	<div class="filter-bar" ng-hide="!category">
		<div class="btn-group dropdown"> 
			<button type="button" class="btn btn-sm btn-primary dropdown-toggle" data-toggle="dropdown">Objects <span class="caret"></span></button>
			<ul class="dropdown-menu" role="menu">
				<li ng-repeat="t in tags" ng-class="{active:t.active}"><a href="#" tabindex="-1" ng-click="toggleTag(t, $event)">{{t.name}}</a></li>
				<li class="divider"></li>
				<li><a href="#" ng-click="deselectAll('tags', $event)">Deselect all</a>
			</ul>
		</div>
		<div class="btn-group dropdown" ng-repeat="f in fgroups">
			<button type="button" class="btn btn-sm btn-primary dropdown-toggle" data-toggle="dropdown">{{f.name}} <span class="caret"></span></button>
			<ul class="dropdown-menu" role="menu">
				<li ng-repeat="p in fdata[f.name]" ng-class="{active:p.active}"><a href="#" tabindex="-1" ng-click="toggleProp(p, $event)">{{p.name}}</a></li>
				<li class="divider"></li>
				<li><a href="#" ng-click="deselectAll(f.name, $event)">Deselect all</a>
			</ul>
		</div>
	</div>
	<div class="main-view" ng-hide="!category">
		<div ng-class="{'shop-box':true, closed:model.showMode === 'right', wide:model.showMode === 'left'}">

            <button type="button" class="close right-corner" ng-click="action.close('left')">
				<span ng-class="{glyphicon:true, 'glyphicon-chevron-left':model.showMode !== 'right', 'glyphicon-chevron-right':model.showMode === 'right'}"></span>
			</button>

            <div class="block-header" ng-hide="shopHidden">
				<h4 class="pull-left">{{category.name}} SHOP</h4>           
				<span class="block-header-reset" ng-click="resetShopItems()">Reset all</spa>
			</div>
			<div>
				<pagination class="pagination" rotate="false" boundary-links="false" total-items="shop.total" ng-model="shop.currentPage" ng-change="loadShopPageItems()" max-size="pageCount"></pagination>
			</div>

			<ul class="shop-items clearfix" ng-hide="shopHidden">
				<li class="shopitem" ng-repeat="item in shop.items">
					<div class="item-header">
						<label>
							<input type="checkbox" ng-model="item.selected" ng-true-value="1" ng-false-value="">
							<span>{{item.selected ? "Selected" : "Deselect" }}</span>
						</label>
						<span class="item-header-name">{{item.name}}</span>
						<span class="item-header-basket"></span>
					</div>
					<div class="item-content" ng-click="action.openDetails(item)">
						<img class="item-content-image" ng-src="{{item.image_src}}" />
					</div>
				</li>
			</ul>

		</div>

		<div ng-class="{'d3-box':true, closed:model.showMode === 'left', wide:model.showMode === 'right'}">

            <button type="button" class="close left-corner" ng-click="action.close('right')">
				<span ng-class="{glyphicon:true, 'glyphicon-chevron-left':model.showMode === 'left', 'glyphicon-chevron-right':model.showMode !== 'left'}"></span>
			</button>

            <div class="block-header">
				<h4>3D MODELS</h4>
                <pagination class="pagination" rotate="false" boundary-links="false" total-items="d3.total" ng-model="d3.currentPage" ng-change="load3dPageItems()" max-size="pageCount"></pagination>
            </div>

			<div class="d3-items clearfix">
				<div class="d3item" ng-repeat="item in d3.items">
					<img ng-src="{{item.image_src}}"/>
					<span>{{item.name}}</span>
				</div>
			</div>

		</div>
	</div>
	<script type="text/ng-template" id="itemDetailsModal.html">
        <div class="modal-header">
        	<button type="button" ng-click="close()" class="close pull-right">&times;</button>
            <h3 class="modal-title">{{item.name}}</h3>
        </div>
        <div class="modal-body">
            <div class="modal-body-image">
                <img ng-src="{{item.image_src}}" />
            </div>
            <div class="modal-body-text">
                <div class="modal-body-title">{{item.name}}</div>
                <div class="modal-body-values">
                    <div><span>Author: </span><span>XXX XXX</span></div>
                    <div><span>File size: </span><span>XXX</span></div>
                    <div><span>File format: </span><span>XXX</span></div>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-primary" ng-click="close()">Close</button>
        </div>
    </script>
</div>
